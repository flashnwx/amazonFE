{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { truthProp, createNamespace, BORDER_TOP_BOTTOM } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"collapse\");\nconst COLLAPSE_KEY = Symbol(name);\nconst collapseProps = {\n  border: truthProp,\n  accordion: Boolean,\n  modelValue: {\n    type: [String, Number, Array],\n    default: \"\"\n  }\n};\n\nfunction validateModelValue(modelValue, accordion) {\n  if (accordion && Array.isArray(modelValue)) {\n    console.error('[Vant] Collapse: \"v-model\" should not be Array in accordion mode');\n    return false;\n  }\n\n  if (!accordion && !Array.isArray(modelValue)) {\n    console.error('[Vant] Collapse: \"v-model\" should be Array in non-accordion mode');\n    return false;\n  }\n\n  return true;\n}\n\nvar stdin_default = defineComponent({\n  name,\n  props: collapseProps,\n  emits: [\"change\", \"update:modelValue\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      linkChildren,\n      children\n    } = useChildren(COLLAPSE_KEY);\n\n    const updateName = name2 => {\n      emit(\"change\", name2);\n      emit(\"update:modelValue\", name2);\n    };\n\n    const toggle = (name2, expanded) => {\n      const {\n        accordion,\n        modelValue\n      } = props;\n\n      if (accordion) {\n        updateName(name2 === modelValue ? \"\" : name2);\n      } else if (expanded) {\n        updateName(modelValue.concat(name2));\n      } else {\n        updateName(modelValue.filter(activeName => activeName !== name2));\n      }\n    };\n\n    const toggleAll = (options = {}) => {\n      if (props.accordion) {\n        return;\n      }\n\n      if (typeof options === \"boolean\") {\n        options = {\n          expanded: options\n        };\n      }\n\n      const {\n        expanded,\n        skipDisabled\n      } = options;\n      const expandedChildren = children.filter(item => {\n        if (item.disabled && skipDisabled) {\n          return item.expanded.value;\n        }\n\n        return expanded != null ? expanded : !item.expanded.value;\n      });\n      const names = expandedChildren.map(item => item.itemName.value);\n      updateName(names);\n    };\n\n    const isExpanded = name2 => {\n      const {\n        accordion,\n        modelValue\n      } = props;\n\n      if (process.env.NODE_ENV !== \"production\" && !validateModelValue(modelValue, accordion)) {\n        return false;\n      }\n\n      return accordion ? modelValue === name2 : modelValue.includes(name2);\n    };\n\n    useExpose({\n      toggleAll\n    });\n    linkChildren({\n      toggle,\n      isExpanded\n    });\n    return () => {\n      var _a;\n\n      return _createVNode(\"div\", {\n        \"class\": [bem(), {\n          [BORDER_TOP_BOTTOM]: props.border\n        }]\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n\n});\nexport { COLLAPSE_KEY, stdin_default as default };","map":{"version":3,"names":["createVNode","_createVNode","defineComponent","truthProp","createNamespace","BORDER_TOP_BOTTOM","useChildren","useExpose","name","bem","COLLAPSE_KEY","Symbol","collapseProps","border","accordion","Boolean","modelValue","type","String","Number","Array","default","validateModelValue","isArray","console","error","stdin_default","props","emits","setup","emit","slots","linkChildren","children","updateName","name2","toggle","expanded","concat","filter","activeName","toggleAll","options","skipDisabled","expandedChildren","item","disabled","value","names","map","itemName","isExpanded","process","env","NODE_ENV","includes","_a","call"],"sources":["/Users/niweixing/Downloads/web-code/node_modules/vant/es/collapse/Collapse.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { truthProp, createNamespace, BORDER_TOP_BOTTOM } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"collapse\");\nconst COLLAPSE_KEY = Symbol(name);\nconst collapseProps = {\n  border: truthProp,\n  accordion: Boolean,\n  modelValue: {\n    type: [String, Number, Array],\n    default: \"\"\n  }\n};\nfunction validateModelValue(modelValue, accordion) {\n  if (accordion && Array.isArray(modelValue)) {\n    console.error('[Vant] Collapse: \"v-model\" should not be Array in accordion mode');\n    return false;\n  }\n  if (!accordion && !Array.isArray(modelValue)) {\n    console.error('[Vant] Collapse: \"v-model\" should be Array in non-accordion mode');\n    return false;\n  }\n  return true;\n}\nvar stdin_default = defineComponent({\n  name,\n  props: collapseProps,\n  emits: [\"change\", \"update:modelValue\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      linkChildren,\n      children\n    } = useChildren(COLLAPSE_KEY);\n    const updateName = (name2) => {\n      emit(\"change\", name2);\n      emit(\"update:modelValue\", name2);\n    };\n    const toggle = (name2, expanded) => {\n      const {\n        accordion,\n        modelValue\n      } = props;\n      if (accordion) {\n        updateName(name2 === modelValue ? \"\" : name2);\n      } else if (expanded) {\n        updateName(modelValue.concat(name2));\n      } else {\n        updateName(modelValue.filter((activeName) => activeName !== name2));\n      }\n    };\n    const toggleAll = (options = {}) => {\n      if (props.accordion) {\n        return;\n      }\n      if (typeof options === \"boolean\") {\n        options = {\n          expanded: options\n        };\n      }\n      const {\n        expanded,\n        skipDisabled\n      } = options;\n      const expandedChildren = children.filter((item) => {\n        if (item.disabled && skipDisabled) {\n          return item.expanded.value;\n        }\n        return expanded != null ? expanded : !item.expanded.value;\n      });\n      const names = expandedChildren.map((item) => item.itemName.value);\n      updateName(names);\n    };\n    const isExpanded = (name2) => {\n      const {\n        accordion,\n        modelValue\n      } = props;\n      if (process.env.NODE_ENV !== \"production\" && !validateModelValue(modelValue, accordion)) {\n        return false;\n      }\n      return accordion ? modelValue === name2 : modelValue.includes(name2);\n    };\n    useExpose({\n      toggleAll\n    });\n    linkChildren({\n      toggle,\n      isExpanded\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"div\", {\n        \"class\": [bem(), {\n          [BORDER_TOP_BOTTOM]: props.border\n        }]\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  COLLAPSE_KEY,\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}